<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>POKARE - Retrowave Poker</title>
  <link rel="stylesheet" href="/src/styles/main.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="game-container">
    <canvas id="game-canvas"></canvas>
    
    <!-- Main Menu -->
    <div id="main-menu" class="menu-screen">
      <div class="menu-title">
        <h1>POKARE</h1>
        <p class="subtitle">RETROWAVE POKER</p>
      </div>
      <div class="menu-buttons">
        <button class="neon-btn" id="btn-single">JUGAR VS BOTS</button>
        <button class="neon-btn" id="btn-multi">MULTIJUGADOR</button>
        <button class="neon-btn" id="btn-shop">TIENDA</button>
        <button class="neon-btn" id="btn-tutorial">TUTORIAL</button>
        <button class="neon-btn" id="btn-settings">OPCIONES</button>
      </div>
      <div class="menu-footer">
        <p>♠ ♥ ♦ ♣</p>
      </div>
    </div>

    <!-- Profile Setup (shown before multiplayer) -->
    <div id="profile-setup" class="menu-screen hidden">
      <h2 class="section-title">TU PERFIL</h2>
      <div class="profile-form">
        <div class="avatar-area">
          <div class="avatar-preview" id="avatar-preview">
            <span class="avatar-placeholder">?</span>
          </div>
          <label class="avatar-upload-btn neon-btn secondary" for="avatar-input">FOTO (OPCIONAL)</label>
          <input type="file" id="avatar-input" accept="image/*" style="display:none">
        </div>
        <div class="option-group">
          <label>NOMBRE DE USUARIO</label>
          <input type="text" id="username-input" class="neon-input" placeholder="Tu nombre..." maxlength="20" value="">
        </div>
      </div>
      <div class="setup-buttons">
        <button class="neon-btn" id="btn-profile-continue">CONTINUAR</button>
        <button class="neon-btn secondary" id="btn-profile-back">VOLVER</button>
      </div>
    </div>

    <!-- Multiplayer Lobby -->
    <div id="mp-lobby" class="menu-screen hidden">
      <h2 class="section-title">MULTIJUGADOR</h2>
      <div class="lobby-options">
        <div class="lobby-box">
          <h3>CREAR SALA</h3>
          <div class="option-group">
            <label>FICHAS INICIALES</label>
            <div class="option-selector">
              <button class="opt-btn" data-mp-chips="500">500</button>
              <button class="opt-btn active" data-mp-chips="1000">1000</button>
              <button class="opt-btn" data-mp-chips="5000">5000</button>
            </div>
          </div>
          <div class="option-group">
            <label>HABILIDADES</label>
            <div class="option-selector">
              <button class="opt-btn active" data-mp-abilities="on">ON</button>
              <button class="opt-btn" data-mp-abilities="off">OFF</button>
            </div>
          </div>
          <button class="neon-btn" id="btn-create-room">CREAR SALA</button>
        </div>
        <div class="lobby-divider">O</div>
        <div class="lobby-box">
          <h3>UNIRSE A SALA</h3>
          <div class="option-group">
            <label>CÓDIGO DE SALA</label>
            <input type="text" id="room-code-input" class="neon-input room-code" placeholder="XXXXX" maxlength="5">
          </div>
          <button class="neon-btn" id="btn-join-room">UNIRSE</button>
        </div>
      </div>
      <div class="lobby-status" id="lobby-status"></div>
      <div class="setup-buttons">
        <button class="neon-btn secondary" id="btn-lobby-back">VOLVER</button>
      </div>
    </div>

    <!-- Room Waiting -->
    <div id="room-waiting" class="menu-screen hidden">
      <h2 class="section-title">SALA <span id="room-code-display" class="room-code-big"></span></h2>
      <p class="room-copy-hint">Comparte este código con tus amigos</p>
      <div class="room-players" id="room-players-list"></div>
      <div class="setup-buttons">
        <button class="neon-btn" id="btn-room-start" style="display:none">INICIAR PARTIDA</button>
        <button class="neon-btn secondary" id="btn-room-leave">SALIR DE SALA</button>
      </div>
    </div>

    <!-- Bot Setup -->
    <div id="bot-setup" class="menu-screen hidden">
      <h2 class="section-title">CONFIGURAR PARTIDA</h2>
      <div class="setup-options">
        <div class="option-group">
          <label>NÚMERO DE BOTS</label>
          <div class="option-selector">
            <button class="opt-btn" data-bots="1">1</button>
            <button class="opt-btn active" data-bots="2">2</button>
            <button class="opt-btn" data-bots="3">3</button>
            <button class="opt-btn" data-bots="4">4</button>
          </div>
        </div>
        <div class="option-group">
          <label>DIFICULTAD</label>
          <div class="option-selector">
            <button class="opt-btn" data-diff="easy">FÁCIL</button>
            <button class="opt-btn active" data-diff="medium">MEDIO</button>
            <button class="opt-btn" data-diff="hard">DIFÍCIL</button>
          </div>
        </div>
        <div class="option-group">
          <label>FICHAS INICIALES</label>
          <div class="option-selector">
            <button class="opt-btn" data-chips="500">500</button>
            <button class="opt-btn active" data-chips="1000">1000</button>
            <button class="opt-btn" data-chips="5000">5000</button>
          </div>
        </div>
      </div>
      <div class="setup-buttons">
        <button class="neon-btn" id="btn-start-game">INICIAR PARTIDA</button>
        <button class="neon-btn secondary" id="btn-back-menu">VOLVER</button>
      </div>
    </div>

    <!-- Settings -->
    <div id="settings-screen" class="menu-screen hidden">
      <h2 class="section-title">OPCIONES</h2>
      <div class="setup-options">
        <div class="option-group">
          <label>VOLUMEN MÚSICA</label>
          <input type="range" id="vol-music" min="0" max="100" value="50" class="neon-slider">
        </div>
        <div class="option-group">
          <label>VOLUMEN EFECTOS</label>
          <input type="range" id="vol-sfx" min="0" max="100" value="70" class="neon-slider">
        </div>
        <div class="option-group">
          <label>BRILLO</label>
          <input type="range" id="vol-brightness" min="30" max="200" value="120" class="neon-slider">
        </div>
        <div class="option-group">
          <label>EFECTO VHS</label>
          <div class="option-selector">
            <button class="opt-btn active" data-vhs="on">ON</button>
            <button class="opt-btn" data-vhs="off">OFF</button>
          </div>
        </div>
        <div class="option-group">
          <label>BLOOM (BRILLO NEÓN)</label>
          <div class="option-selector">
            <button class="opt-btn active" data-bloom="on">ON</button>
            <button class="opt-btn" data-bloom="off">OFF</button>
          </div>
        </div>
        <div class="option-group">
          <label>RULETA RUSA</label>
          <div class="option-selector">
            <button class="opt-btn active" data-roulette="on">ON</button>
            <button class="opt-btn" data-roulette="off">OFF</button>
          </div>
        </div>
      </div>
      <div class="setup-buttons">
        <button class="neon-btn secondary" id="btn-back-settings">VOLVER</button>
      </div>
    </div>

    <!-- Game HUD -->
    <div id="game-hud" class="hidden">
      <!-- Top bar -->
      <div class="hud-top">
        <div class="pot-display">
          <span class="pot-label">POZO</span>
          <span class="pot-value" id="pot-value">$0</span>
        </div>
        <div class="round-display">
          <span id="round-phase">ESPERANDO...</span>
        </div>
        <div class="room-code-hud" id="room-code-hud" style="display:none"></div>
        <div class="streak-counter" id="streak-counter" style="display:none">
          <span class="streak-value" id="streak-value"></span>
          <span class="streak-stats" id="streak-stats"></span>
        </div>
      </div>

      <!-- Player cards display (center, 3D backing) -->
      <div class="hud-cards" id="player-cards-hud"></div>

      <!-- Mini 2D cards bottom-left -->
      <div class="mini-cards" id="mini-cards"></div>

      <!-- Other players info -->
      <div class="hud-players" id="players-display"></div>

      <!-- Abilities bar -->
      <div class="abilities-bar" id="abilities-bar" style="display:none">
        <button class="ability-btn ability-peek" data-ability="peek" title="Ve la próxima carta comunitaria ($100)">
          <div class="ability-icon-wrap"><span class="ability-icon">&#128065;</span></div>
          <span class="ability-name">Visión</span><span class="ability-cost">$100</span>
          <div class="ability-cd" id="cd-peek"></div>
        </button>
        <button class="ability-btn ability-shield" data-ability="shield" title="Protege tu apuesta ($150)">
          <div class="ability-icon-wrap"><span class="ability-icon">&#128737;</span></div>
          <span class="ability-name">Escudo</span><span class="ability-cost">$150</span>
          <div class="ability-cd" id="cd-shield"></div>
        </button>
        <button class="ability-btn ability-intimidate" data-ability="intimidate" title="Revela palo de carta rival ($75)">
          <div class="ability-icon-wrap"><span class="ability-icon">&#128123;</span></div>
          <span class="ability-name">Intimidar</span><span class="ability-cost">$75</span>
          <div class="ability-cd" id="cd-intimidate"></div>
        </button>
        <button class="ability-btn ability-swap" data-ability="swap" title="Cambia una carta ($200)">
          <div class="ability-icon-wrap"><span class="ability-icon">&#128260;</span></div>
          <span class="ability-name">Cambio</span><span class="ability-cost">$200</span>
          <div class="ability-cd" id="cd-swap"></div>
        </button>
        <button class="ability-btn ability-double" data-ability="doubledown" title="Doble o Nada (GRATIS)">
          <div class="ability-icon-wrap"><span class="ability-icon">&#9876;&#65039;</span></div>
          <span class="ability-name">Doble</span><span class="ability-cost">GRATIS</span>
          <div class="ability-cd" id="cd-doubledown"></div>
        </button>
      </div>

      <!-- Bottom controls -->
      <div class="hud-bottom">
        <div class="player-info">
          <div class="player-avatar-mini" id="hud-avatar"></div>
          <div>
            <span class="player-name" id="hud-player-name">TÚ</span>
            <span class="player-chips" id="player-chips">$1000</span>
          </div>
        </div>
        <div class="betting-controls" id="betting-controls">
          <button class="action-btn fold-btn" id="btn-fold">FOLD</button>
          <button class="action-btn check-btn" id="btn-check">CHECK</button>
          <button class="action-btn call-btn" id="btn-call">CALL <span id="call-amount"></span></button>
          <div class="raise-group">
            <input type="range" id="raise-slider" min="0" max="1000" value="100" class="neon-slider raise-slider">
            <span class="raise-value" id="raise-value">$100</span>
            <button class="action-btn raise-btn" id="btn-raise">RAISE</button>
          </div>
          <button class="action-btn allin-btn" id="btn-allin">ALL IN</button>
        </div>
      </div>

      <!-- Message display -->
      <div class="hud-message" id="hud-message"></div>

      <!-- Chat (multiplayer) -->
      <div class="chat-box" id="chat-box" style="display:none">
        <div class="chat-messages" id="chat-messages"></div>
        <div class="chat-input-row">
          <input type="text" id="chat-input" class="neon-input chat-input" placeholder="Mensaje..." maxlength="200">
          <button class="action-btn check-btn" id="btn-chat-send">&#9654;</button>
        </div>
      </div>
    </div>

    <!-- Win/Loss overlay -->
    <div id="round-result" class="hidden">
      <div class="result-content">
        <h2 id="result-title"></h2>
        <p id="result-detail"></p>
        <div id="result-hands"></div>
        <button class="neon-btn" id="btn-next-round">SIGUIENTE MANO</button>
      </div>
    </div>

    <!-- Elimination overlay -->
    <div id="elimination-overlay" class="hidden">
      <div class="elim-content">
        <div class="elim-skull">&#9760;</div>
        <h2 class="elim-title" id="elim-title">ELIMINADO</h2>
        <p class="elim-name" id="elim-name"></p>
        <div class="elim-glitch"></div>
      </div>
    </div>

    <!-- Ability effect overlay -->
    <div id="ability-overlay" class="hidden">
      <div class="ability-effect-content" id="ability-effect-content"></div>
    </div>

    <!-- Tutorial overlay -->
    <div id="tutorial-overlay" class="hidden">
      <div class="tutorial-content">
        <div class="tutorial-header">
          <h2>TUTORIAL</h2>
          <button class="tutorial-close" id="btn-tutorial-close">&#10005;</button>
        </div>
        <div class="tutorial-slides" id="tutorial-slides">
          <!-- Slides injected via JS -->
        </div>
        <div class="tutorial-nav">
          <button class="neon-btn secondary" id="btn-tut-prev">&#9664; ANTERIOR</button>
          <span class="tutorial-progress" id="tut-progress">1 / 8</span>
          <button class="neon-btn" id="btn-tut-next">SIGUIENTE &#9654;</button>
        </div>
      </div>
    </div>

    <!-- Russian Roulette overlay -->
    <div id="roulette-overlay" class="hidden">
      <div class="roulette-content">
        <div class="roulette-cylinder">
          <div class="cylinder-ring"></div>
          <div class="cylinder-ring r2"></div>
          <div class="cylinder-ring r3"></div>
        </div>
        <h2 class="roulette-text" id="roulette-text">RULETA RUSA...</h2>
        <div class="roulette-subtitle" id="roulette-sub">El tambor gira...</div>
      </div>
    </div>

    <!-- Music Player / Radio -->
    <div class="music-player" id="music-player">
      <div class="mp-toggle" id="mp-toggle">&#9835;</div>
      <div class="mp-panel hidden" id="mp-panel">
        <div class="mp-title">RADIO POKARE</div>
        <div class="mp-now" id="mp-now">Sin pista</div>
        <div class="mp-controls">
          <button class="mp-btn" id="mp-prev">&#9664;&#9664;</button>
          <button class="mp-btn mp-play" id="mp-play">&#9654;</button>
          <button class="mp-btn" id="mp-next">&#9654;&#9654;</button>
        </div>
        <input type="range" id="mp-volume" min="0" max="100" value="50" class="neon-slider mp-vol">
        <div class="mp-section-label">RADIO 80s</div>
        <div class="mp-radios">
          <button class="mp-radio-btn" data-radio="synthwave">Synthwave</button>
          <button class="mp-radio-btn" data-radio="retrowave">Retrowave</button>
          <button class="mp-radio-btn" data-radio="chillwave">Chillwave</button>
          <button class="mp-radio-btn" data-radio="vaporwave">Vaporwave</button>
        </div>
        <div class="mp-section-label">YOUTUBE</div>
        <div class="mp-yt-row">
          <input type="text" id="mp-yt-url" class="neon-input mp-yt-input" placeholder="URL o nombre de canción...">
          <button class="mp-btn mp-yt-add" id="mp-yt-add">&#9654;</button>
        </div>
        <div class="mp-yt-embed hidden" id="mp-yt-embed">
          <iframe id="mp-yt-iframe" width="100%" height="120" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <label class="mp-upload-label">
          <span>+ Agregar Archivo</span>
          <input type="file" id="mp-file" accept="audio/*" multiple style="display:none">
        </label>
      </div>
    </div>

    <!-- Shop overlay (Fortnite-style) -->
    <div id="shop-overlay" class="menu-screen hidden">
      <div class="shop-layout">
        <!-- Left: Preview panel -->
        <div class="shop-preview-panel">
          <div class="shop-preview-header">
            <h2 class="shop-preview-title" id="shop-preview-title">TIENDA POKARE</h2>
            <div class="shop-preview-rarity" id="shop-preview-rarity">SELECCIONA UN ITEM</div>
          </div>
          <canvas id="shop-preview-canvas" width="400" height="400"></canvas>
          <div class="shop-preview-info">
            <div class="shop-preview-name" id="shop-preview-name">---</div>
            <div class="shop-preview-desc" id="shop-preview-desc">Haz click en un item para ver la vista previa</div>
          </div>
          <div class="shop-preview-actions">
            <div class="shop-balance-box">
              <span class="shop-balance-icon">$</span>
              <span id="shop-balance">0</span>
              <span class="shop-balance-label">fichas</span>
            </div>
            <button class="shop-buy-btn" id="shop-buy-btn" disabled>COMPRAR</button>
          </div>
        </div>
        <!-- Right: Items grid -->
        <div class="shop-items-panel">
          <div class="shop-tabs">
            <button class="shop-tab active" data-tab="all">Todo</button>
            <button class="shop-tab" data-tab="card">Dorsos</button>
            <button class="shop-tab" data-tab="table">Mesas</button>
            <button class="shop-tab" data-tab="emote">Emotes</button>
            <button class="shop-tab" data-tab="chip">Fichas</button>
          </div>
          <div class="shop-grid" id="shop-grid">
            <div class="shop-item" data-item="card-gold" data-price="5000" data-cat="card" data-desc="Dorso de carta con acabado dorado premium" data-rarity="RARO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#ffd700,#ff8c00)">&#9824;</div>
              <span class="shop-item-name">Dorso Dorado</span>
              <span class="shop-item-price">$5,000</span>
            </div>
            <div class="shop-item" data-item="card-neon" data-price="3000" data-cat="card" data-desc="Dorso con estilo neón retrowave" data-rarity="COMUN">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#ff6ec7,#7b2ff7)">&#9829;</div>
              <span class="shop-item-name">Dorso Neón</span>
              <span class="shop-item-price">$3,000</span>
            </div>
            <div class="shop-item" data-item="card-skull" data-price="4000" data-cat="card" data-desc="Dorso oscuro con calavera intimidante" data-rarity="RARO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#333,#880000)">&#9760;</div>
              <span class="shop-item-name">Dorso Skull</span>
              <span class="shop-item-price">$4,000</span>
            </div>
            <div class="shop-item" data-item="card-royal" data-price="7000" data-cat="card" data-desc="Dorso de la realeza con detalles dorados" data-rarity="EPICO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#4a0080,#c8a84e)">&#9813;</div>
              <span class="shop-item-name">Dorso Royal</span>
              <span class="shop-item-price">$7,000</span>
            </div>
            <div class="shop-item" data-item="table-red" data-price="8000" data-cat="table" data-desc="Fieltro rojo elegante para tu mesa" data-rarity="RARO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#8b0000,#ff2255)">&#9830;</div>
              <span class="shop-item-name">Mesa Roja</span>
              <span class="shop-item-price">$8,000</span>
            </div>
            <div class="shop-item" data-item="table-blue" data-price="8000" data-cat="table" data-desc="Fieltro azul oceánico premium" data-rarity="RARO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#001a66,#00ccff)">&#9827;</div>
              <span class="shop-item-name">Mesa Azul</span>
              <span class="shop-item-price">$8,000</span>
            </div>
            <div class="shop-item" data-item="table-black" data-price="12000" data-cat="table" data-desc="Mesa negra VIP exclusiva para high rollers" data-rarity="LEGENDARIO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#111,#333)">&#9824;</div>
              <span class="shop-item-name">Mesa Negra VIP</span>
              <span class="shop-item-price">$12,000</span>
            </div>
            <div class="shop-item" data-item="emote-fire" data-price="1000" data-cat="emote" data-desc="Muestra que estás en racha" data-rarity="COMUN">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#ff4500,#ff8c00)">&#128293;</div>
              <span class="shop-item-name">Emote Fuego</span>
              <span class="shop-item-price">$1,000</span>
            </div>
            <div class="shop-item" data-item="emote-skull" data-price="1500" data-cat="emote" data-desc="Intimidación máxima en la mesa" data-rarity="COMUN">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#333,#666)">&#128128;</div>
              <span class="shop-item-name">Emote Calavera</span>
              <span class="shop-item-price">$1,500</span>
            </div>
            <div class="shop-item" data-item="emote-crown" data-price="2000" data-cat="emote" data-desc="Demuestra quién manda aquí" data-rarity="RARO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#c8a84e,#fff)">&#128081;</div>
              <span class="shop-item-name">Emote Corona</span>
              <span class="shop-item-price">$2,000</span>
            </div>
            <div class="shop-item" data-item="chip-diamond" data-price="10000" data-cat="chip" data-desc="Fichas de diamante que brillan en la mesa" data-rarity="EPICO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#00bfff,#e0ffff)">&#128142;</div>
              <span class="shop-item-name">Fichas Diamante</span>
              <span class="shop-item-price">$10,000</span>
            </div>
            <div class="shop-item" data-item="chip-ruby" data-price="15000" data-cat="chip" data-desc="Las fichas más exclusivas del casino" data-rarity="LEGENDARIO">
              <div class="shop-item-preview" style="background:linear-gradient(135deg,#cc0033,#ff4466)">&#128142;</div>
              <span class="shop-item-name">Fichas Rubí</span>
              <span class="shop-item-price">$15,000</span>
            </div>
          </div>
        </div>
      </div>
      <div class="setup-buttons" style="margin-top:8px">
        <button class="neon-btn secondary" id="btn-shop-back">VOLVER</button>
      </div>
    </div>

    <!-- Peek card overlay -->
    <div id="peek-overlay" class="hidden">
      <div class="peek-content">
        <h3>VISIÓN ACTIVADA</h3>
        <div class="peek-card" id="peek-card"></div>
        <p>Próxima carta comunitaria</p>
        <button class="neon-btn secondary" id="btn-peek-close">CERRAR</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
